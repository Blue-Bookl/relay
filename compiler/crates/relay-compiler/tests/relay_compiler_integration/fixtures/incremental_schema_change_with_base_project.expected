==================================== INPUT ====================================
# Incremental schema change with a base project sharing the same schema.
#
# Changing a field type (String → Int) is ObjectChanged → SafeWithIncrementalBuild.
# The incremental build must recompile operations referencing the changed type
# so that generated types reflect the new field type.

//- base_src/base.js
graphql`
  query baseQuery {
    me { name }
  }
`;

//- derived_src/derived.js
graphql`
  query derivedQuery {
    me { name }
  }
`;

//- relay.config.json
{
  "sources": {
    "base_src": "base_project",
    "derived_src": "derived_project"
  },
  "projects": {
    "base_project": {
      "schema": "schema.graphql",
      "language": "typescript"
    },
    "derived_project": {
      "schema": "schema.graphql",
      "base": "base_project",
      "language": "typescript"
    }
  }
}

//- schema.graphql
type Query { me: User }
type User { name: String }

//-++ schema.graphql
type Query { me: User }
type User { name: Int }
==================================== OUTPUT ===================================
//-++ base_src/__generated__/baseQuery.graphql.ts
/**
 * <auto-generated> SignedSource<<283b986ca82f9f21b1198b2149d73c97>>
 * @lightSyntaxTransform
 * @nogrep
 */

/* tslint:disable */
/* eslint-disable */
// @ts-nocheck

import { ConcreteRequest } from 'relay-runtime';
export type baseQuery$variables = Record<PropertyKey, never>;
export type baseQuery$data = {
  readonly me: {
    readonly name: number | null | undefined;
  } | null | undefined;
};
export type baseQuery = {
  response: baseQuery$data;
  variables: baseQuery$variables;
};

const node: ConcreteRequest = (function(){
var v0 = [
  {
    "alias": null,
    "args": null,
    "concreteType": "User",
    "kind": "LinkedField",
    "name": "me",
    "plural": false,
    "selections": [
      {
        "alias": null,
        "args": null,
        "kind": "ScalarField",
        "name": "name",
        "storageKey": null
      }
    ],
    "storageKey": null
  }
];
return {
  "fragment": {
    "argumentDefinitions": [],
    "kind": "Fragment",
    "metadata": null,
    "name": "baseQuery",
    "selections": (v0/*: any*/),
    "type": "Query",
    "abstractKey": null
  },
  "kind": "Request",
  "operation": {
    "argumentDefinitions": [],
    "kind": "Operation",
    "name": "baseQuery",
    "selections": (v0/*: any*/)
  },
  "params": {
    "cacheID": "d5cea3113e4596144322cb752d654634",
    "id": null,
    "metadata": {},
    "name": "baseQuery",
    "operationKind": "query",
    "text": "query baseQuery {\n  me {\n    name\n  }\n}\n"
  }
};
})();

(node as any).hash = "9b3519aeb1c519c7b0e1c20fdca3ba21";

export default node;

//-++ derived_src/__generated__/derivedQuery.graphql.ts
/**
 * <auto-generated> SignedSource<<a5a53b1445ca00c04e6466be61909c3d>>
 * @lightSyntaxTransform
 * @nogrep
 */

/* tslint:disable */
/* eslint-disable */
// @ts-nocheck

import { ConcreteRequest } from 'relay-runtime';
export type derivedQuery$variables = Record<PropertyKey, never>;
export type derivedQuery$data = {
  readonly me: {
    readonly name: number | null | undefined;
  } | null | undefined;
};
export type derivedQuery = {
  response: derivedQuery$data;
  variables: derivedQuery$variables;
};

const node: ConcreteRequest = (function(){
var v0 = [
  {
    "alias": null,
    "args": null,
    "concreteType": "User",
    "kind": "LinkedField",
    "name": "me",
    "plural": false,
    "selections": [
      {
        "alias": null,
        "args": null,
        "kind": "ScalarField",
        "name": "name",
        "storageKey": null
      }
    ],
    "storageKey": null
  }
];
return {
  "fragment": {
    "argumentDefinitions": [],
    "kind": "Fragment",
    "metadata": null,
    "name": "derivedQuery",
    "selections": (v0/*: any*/),
    "type": "Query",
    "abstractKey": null
  },
  "kind": "Request",
  "operation": {
    "argumentDefinitions": [],
    "kind": "Operation",
    "name": "derivedQuery",
    "selections": (v0/*: any*/)
  },
  "params": {
    "cacheID": "90badf053dbd4901c413786a75ea0a0e",
    "id": null,
    "metadata": {},
    "name": "derivedQuery",
    "operationKind": "query",
    "text": "query derivedQuery {\n  me {\n    name\n  }\n}\n"
  }
};
})();

(node as any).hash = "16d94ca0feda78c9becfaf2ea89428cf";

export default node;



Artifact Map:
Project: base_project
  Type: Mapping
  - Source: ExecutableDefinition: baseQuery
    Path: base_src/__generated__/baseQuery.graphql.ts

Project: derived_project
  Type: Mapping
  - Source: ExecutableDefinition: derivedQuery
    Path: derived_src/__generated__/derivedQuery.graphql.ts
